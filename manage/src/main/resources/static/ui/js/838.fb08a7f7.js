"use strict";(self["webpackChunkstatic"]=self["webpackChunkstatic"]||[]).push([[838],{6838:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});t(7658);var l=t(3396),i=t(4870),s=t(1685),d=t(7327),o=t(4834);class a{constructor(e,r,t,l,i){(0,d.Z)(this,"tid",void 0),(0,d.Z)(this,"uri",void 0),(0,d.Z)(this,"predicates",void 0),(0,d.Z)(this,"filters",void 0),(0,d.Z)(this,"order",void 0),this.tid=e,this.uri=r,this.predicates=t,this.filters=l,this.order=i}copy(e){this.tid=e.tid,this.uri=e.uri,this.predicates=e.predicates,this.filters=e.filters,this.order=e.order}}class u{constructor(e,r,t,l,i){(0,d.Z)(this,"rid",void 0),(0,d.Z)(this,"uri",void 0),(0,d.Z)(this,"predicates",void 0),(0,d.Z)(this,"filters",void 0),(0,d.Z)(this,"order",void 0),this.rid=e,this.uri=r,this.predicates=t,this.filters=l,this.order=i}setUseTemp(e){this.uri=e.uri,this.predicates=(0,o.TN)(e.predicates),this.filters=(0,o.TN)(e.filters),this.order=e.order}toRestfulObj(){return{id:this.rid,uri:this.uri,predicates:JSON.parse(this.predicates),filters:JSON.parse(this.filters),order:this.order}}copy(e){this.rid=e.id,this.uri=e.uri,this.predicates=(0,o.TN)(e.predicates),this.filters=(0,o.TN)(e.filters),this.order=e.order}}var p=t(3824),c=(0,l.aZ)({__name:"RouteInfo",setup(e){const r=(0,i.iH)(!1),t=(0,i.iH)("default"),d=(0,i.iH)(),c=(0,i.qj)(new u("","","","",0)),h=(0,i.qj)({rid:[{required:!0,message:"路由标识不能为空",trigger:"blur"}],uri:[{required:!0,message:"路由uri不能为空",trigger:"blur"}],predicates:[{required:!0,message:"路由谓语不能为空",trigger:"blur"}],filters:[{required:!0,message:"路由过滤不能为空",trigger:"blur"}],order:[{required:!0,message:"路由优先级不能为空",trigger:"blur"}]}),n=8,m=(0,i.qj)([]),f=(0,i.qj)(new a(1,"","","",0)),g=e=>{const r=m.filter((r=>r.tid==e))[0];f.copy(r),c.setUseTemp(r),console.log("选择中的模板: {}",f)},v=async e=>{e&&await e.validate(((e,r)=>{e?(0,s.Z)({url:"/hmis/manage/route/saveRouteConfig/v1.0",method:"post",data:c.toRestfulObj()}).then((e=>{1==e.data.code&&((0,o.Jy)("保存结果",e.data.body),p.Z.push("/route/list"))})).catch((e=>{(0,o.Jy)("操作结果","保存失败","error")})):console.log("error submit!",r)}))},b=e=>{e&&e.resetFields()};return(0,l.bv)((()=>{console.log("路由数据: ",p.Z.currentRoute.value.query),(0,s.Z)({url:"/hmis/manage/route/queryRouteTemplates/v1.0",method:"post"}).then((e=>{1==e.data.code&&(m.length=0,e.data.body.forEach((e=>m.push(e))),console.log("查询到模板信息: ",m),Object.keys(p.Z.currentRoute.value.query).length>0?(console.log("编辑功能"),c.copy(p.Z.currentRoute.value.query),r.value=!0):g(f.tid))})).catch((e=>{console.error(e)}))})),(e,i)=>{const s=(0,l.up)("el-option"),o=(0,l.up)("el-select"),a=(0,l.up)("el-form-item"),u=(0,l.up)("el-input"),p=(0,l.up)("el-button"),w=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(w,{ref_key:"ruleFormRef",ref:d,model:c,rules:h,"label-width":"120px",class:"demo-ruleForm",size:t.value,"status-icon":""},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{label:"路由模板"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{modelValue:f.tid,"onUpdate:modelValue":i[0]||(i[0]=e=>f.tid=e),placeholder:"请选择对应的模板",onChange:i[1]||(i[1]=e=>g(f.tid))},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m,((e,r)=>((0,l.wg)(),(0,l.j4)(s,{label:e.name,value:e.tid},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由标识",prop:"rid"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:c.rid,"onUpdate:modelValue":i[2]||(i[2]=e=>c.rid=e),placeholder:"请输入路由标识...",disabled:r.value},null,8,["modelValue","disabled"])])),_:1}),(0,l.Wm)(a,{label:"路由uri",prop:"uri"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:c.uri,"onUpdate:modelValue":i[3]||(i[3]=e=>c.uri=e),placeholder:"请输入uri..."},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由谓语",prop:"predicates"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:c.predicates,"onUpdate:modelValue":i[4]||(i[4]=e=>c.predicates=e),type:"textarea",rows:n},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由过滤",prop:"filters"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:c.filters,"onUpdate:modelValue":i[5]||(i[5]=e=>c.filters=e),type:"textarea",rows:n},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"优先级",prop:"order"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:c.order,"onUpdate:modelValue":i[6]||(i[6]=e=>c.order=e),placeholder:"请输入路由标识...",type:"number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary",onClick:i[7]||(i[7]=e=>v(d.value))},{default:(0,l.w5)((()=>[(0,l.Uk)("保存")])),_:1}),(0,l.Wm)(p,{onClick:i[8]||(i[8]=e=>b(d.value))},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules","size"])}}}),h=t(89);const n=(0,h.Z)(c,[["__scopeId","data-v-9cd1671c"]]);var m=n}}]);
//# sourceMappingURL=838.fb08a7f7.js.map
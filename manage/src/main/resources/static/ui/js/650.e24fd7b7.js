"use strict";(self["webpackChunkstatic"]=self["webpackChunkstatic"]||[]).push([[650],{89:function(e,r){r.Z=(e,r)=>{const t=e.__vccOpts||e;for(const[l,i]of r)t[l]=i;return t}},8650:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});t(7658);var l=t(3396),i=t(4870),s=t(1685),o=t(7327),d=t(4834);class a{constructor(e,r,t,l,i){(0,o.Z)(this,"tid",void 0),(0,o.Z)(this,"uri",void 0),(0,o.Z)(this,"predicates",void 0),(0,o.Z)(this,"filters",void 0),(0,o.Z)(this,"order",void 0),this.tid=e,this.uri=r,this.predicates=t,this.filters=l,this.order=i}copy(e){this.tid=e.tid,this.uri=e.uri,this.predicates=e.predicates,this.filters=e.filters,this.order=e.order}}class u{constructor(e,r,t,l,i){(0,o.Z)(this,"rid",void 0),(0,o.Z)(this,"uri",void 0),(0,o.Z)(this,"predicates",void 0),(0,o.Z)(this,"filters",void 0),(0,o.Z)(this,"order",void 0),this.rid=e,this.uri=r,this.predicates=t,this.filters=l,this.order=i}setUseTemp(e){this.uri=e.uri,this.predicates=(0,d.TN)(e.predicates),this.filters=(0,d.TN)(e.filters),this.order=e.order}toRestfulObj(){return{id:this.rid,uri:this.uri,predicates:JSON.parse(this.predicates),filters:JSON.parse(this.filters),order:this.order}}copy(e){this.rid=e.id,this.uri=e.uri,this.predicates=(0,d.TN)(e.predicates),this.filters=(0,d.TN)(e.filters),this.order=e.order}}var c=t(3824),p=(0,l.aZ)({__name:"RouteInfo",setup(e){const r=(0,i.iH)(!1),t=(0,i.iH)("default"),o=(0,i.iH)(),p=(0,i.qj)(new u("","","","",0)),n=(0,i.qj)({rid:[{required:!0,message:"路由标识不能为空",trigger:"blur"}],uri:[{required:!0,message:"路由uri不能为空",trigger:"blur"}],predicates:[{required:!0,message:"路由谓语不能为空",trigger:"blur"}],filters:[{required:!0,message:"路由过滤不能为空",trigger:"blur"}],order:[{required:!0,message:"路由优先级不能为空",trigger:"blur"}]}),h=8,m=(0,i.qj)([]),f=(0,i.qj)(new a(1,"","","",0)),v=e=>{const r=m.filter((r=>r.tid==e))[0];f.copy(r),p.setUseTemp(r),console.log("选择中的模板: {}",f)},g=async e=>{e&&await e.validate(((e,r)=>{e?(0,s.Z)({url:"/hmis/manage/route/saveRouteConfig/v1.0",method:"post",data:p.toRestfulObj()}).then((e=>{1==e.data.code&&((0,d.Jy)("保存结果",e.data.body,"success"),c.Z.push("/route/list"))})).catch((e=>{(0,d.Jy)("操作结果","保存失败","error")})):console.log("error submit!",r)}))},b=e=>{e&&e.resetFields()};return(0,l.bv)((()=>{console.log("路由数据: ",c.Z.currentRoute.value.query),(0,s.Z)({url:"/hmis/manage/route/queryRouteTemplates/v1.0",method:"post"}).then((e=>{1==e.data.code&&(m.length=0,e.data.body.forEach((e=>m.push(e))),console.log("查询到模板信息: ",m),Object.keys(c.Z.currentRoute.value.query).length>0?(console.log("编辑功能"),p.copy(c.Z.currentRoute.value.query),r.value=!0):v(f.tid))})).catch((e=>{console.error(e)}))})),(e,i)=>{const s=(0,l.up)("el-option"),d=(0,l.up)("el-select"),a=(0,l.up)("el-form-item"),u=(0,l.up)("el-input"),c=(0,l.up)("el-button"),w=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(w,{ref_key:"ruleFormRef",ref:o,model:p,rules:n,"label-width":"120px",class:"demo-ruleForm",size:t.value,"status-icon":""},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{label:"路由模板"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:f.tid,"onUpdate:modelValue":i[0]||(i[0]=e=>f.tid=e),placeholder:"请选择对应的模板",onChange:i[1]||(i[1]=e=>v(f.tid))},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m,((e,r)=>((0,l.wg)(),(0,l.j4)(s,{label:e.name,value:e.tid},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由标识",prop:"rid"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:p.rid,"onUpdate:modelValue":i[2]||(i[2]=e=>p.rid=e),placeholder:"请输入路由标识...",disabled:r.value},null,8,["modelValue","disabled"])])),_:1}),(0,l.Wm)(a,{label:"路由uri",prop:"uri"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:p.uri,"onUpdate:modelValue":i[3]||(i[3]=e=>p.uri=e),placeholder:"请输入uri..."},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由谓语",prop:"predicates"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:p.predicates,"onUpdate:modelValue":i[4]||(i[4]=e=>p.predicates=e),type:"textarea",rows:h},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"路由过滤",prop:"filters"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:p.filters,"onUpdate:modelValue":i[5]||(i[5]=e=>p.filters=e),type:"textarea",rows:h},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,{label:"优先级",prop:"order"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:p.order,"onUpdate:modelValue":i[6]||(i[6]=e=>p.order=e),placeholder:"请输入路由标识...",type:"number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"primary",onClick:i[7]||(i[7]=e=>g(o.value))},{default:(0,l.w5)((()=>[(0,l.Uk)("保存")])),_:1}),(0,l.Wm)(c,{onClick:i[8]||(i[8]=e=>b(o.value))},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules","size"])}}}),n=t(89);const h=(0,n.Z)(p,[["__scopeId","data-v-4121911e"]]);var m=h}}]);
//# sourceMappingURL=650.e24fd7b7.js.map